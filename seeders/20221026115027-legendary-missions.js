'use strict';
const { Maps, Currency, Missions } = require('../models/index');

module.exports = {
  async up (queryInterface, Sequelize) {
    const mapsFromDB = await Maps.findAll()
    const currenciesFromDB = await Currency.findAll()
    const maps = {
      'Iridian River': mapsFromDB.find(map => map.name === 'Iridian River').id,
      'Iridian Village': mapsFromDB.find(map => map.name === 'Iridian Village').id,
      'Rainfall Village': mapsFromDB.find(map => map.name === 'Rainfall Village').id,
      'Evergreen Village': mapsFromDB.find(map => map.name === 'Evergreen Village').id,
      'Waterfall Village': mapsFromDB.find(map => map.name === 'Waterfall Village').id,
    }
    const currencies = {
      'Cosmic': currenciesFromDB.find(currency => currency.name === 'Cosmic').id,
      'Gold': currenciesFromDB.find(currency => currency.name === 'Gold').id,
      'Salvage': currenciesFromDB.find(currency => currency.name === 'Salvage').id,
      'Stamina': currenciesFromDB.find(currency => currency.name === 'Stamina').id,
      'Experience': currenciesFromDB.find(currency => currency.name === 'Experience').id,
    }
    const now = new Date()
    
    const missions = [
      //tier 1
      {
        main_branch: 'Expedition',
        map_id: maps['Iridian River'],
        secondary_branch: 'Evolution',
        tier: 1,
        time: 10,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 12,
        experience_reward: 150,
        gold_reward: 450,
        cosmic_reward: [1, 3],
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Iridian Village'],
        secondary_branch: 'Legendary',
        tier: 1,
        time: 6,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 6,
        experience_reward: 95,
        gold_reward: 285,
        cosmic_reward: [0.6, 1.8],
        key: 1,
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Rainfall Village'],
        secondary_branch: 'Legendary',
        tier: 1,
        time: 6,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 6,
        experience_reward: 95,
        gold_reward: 285,
        cosmic_reward: [0.6, 1.8],
        key: 2,
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Evergreen Village'],
        secondary_branch: 'Legendary',
        tier: 1,
        time: 6,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 6,
        experience_reward: 95,
        gold_reward: 285,
        cosmic_reward: [0.6, 1.8],
        key: 3,
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Waterfall Village'],
        secondary_branch: 'Legendary',
        tier: 1,
        time: 6,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 6,
        experience_reward: 95,
        gold_reward: 285,
        cosmic_reward: [0.6, 1.8],
        key: 4,
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Iridian Village'],
        secondary_branch: 'Legendary',
        tier: 1,
        time: 8,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 9,
        experience_reward: 125,
        gold_reward: 375,
        cosmic_reward: [0.8, 2.4],
        key: 1,
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Rainfall Village'],
        secondary_branch: 'Legendary',
        tier: 1,
        time: 8,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 9,
        experience_reward: 125,
        gold_reward: 375,
        cosmic_reward: [0.8, 2.4],
        key: 2,
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Evergreen Village'],
        secondary_branch: 'Legendary',
        tier: 1,
        time: 8,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 9,
        experience_reward: 125,
        gold_reward: 375,
        cosmic_reward: [0.8, 2.4],
        key: 3,
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Waterfall Village'],
        secondary_branch: 'Legendary',
        tier: 1,
        time: 8,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 9,
        experience_reward: 125,
        gold_reward: 375,
        cosmic_reward: [0.8, 2.4],
        key: 4,
      },
      
      //tier 2
      {
        main_branch: 'Expedition',
        map_id: maps['Iridian River'],
        secondary_branch: 'Evolution',
        tier: 2,
        time: 10,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 24,
        experience_reward: 300,
        gold_reward: 900,
        cosmic_reward: [1.5, 4],
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Iridian Village'],
        secondary_branch: 'Legendary',
        tier: 2,
        time: 6,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 12,
        experience_reward: 190,
        gold_reward: 570,
        cosmic_reward: [0.9, 2.4],
        key: 1,
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Rainfall Village'],
        secondary_branch: 'Legendary',
        tier: 2,
        time: 6,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 12,
        experience_reward: 190,
        gold_reward: 570,
        cosmic_reward: [0.9, 2.4],
        key: 2,
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Evergreen Village'],
        secondary_branch: 'Legendary',
        tier: 2,
        time: 6,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 12,
        experience_reward: 190,
        gold_reward: 570,
        cosmic_reward: [0.9, 2.4],
        key: 3,
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Waterfall Village'],
        secondary_branch: 'Legendary',
        tier: 2,
        time: 6,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 12,
        experience_reward: 190,
        gold_reward: 570,
        cosmic_reward: [0.9, 2.4],
        key: 4,
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Iridian Village'],
        secondary_branch: 'Legendary',
        tier: 2,
        time: 8,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 18,
        experience_reward: 250,
        gold_reward: 750,
        cosmic_reward: [1.2, 3.2],
        key: 1,
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Rainfall Village'],
        secondary_branch: 'Legendary',
        tier: 2,
        time: 8,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 18,
        experience_reward: 250,
        gold_reward: 750,
        cosmic_reward: [1.2, 3.2],
        key: 2,
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Evergreen Village'],
        secondary_branch: 'Legendary',
        tier: 2,
        time: 8,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 18,
        experience_reward: 250,
        gold_reward: 750,
        cosmic_reward: [1.2, 3.2],
        key: 3,
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Waterfall Village'],
        secondary_branch: 'Legendary',
        tier: 2,
        time: 8,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 18,
        experience_reward: 250,
        gold_reward: 750,
        cosmic_reward: [1.2, 3.2],
        key: 4,
      },
      
      //tier 3 
      {
        main_branch: 'Expedition',
        map_id: maps['Iridian River'],
        secondary_branch: 'Evolution',
        tier: 3,
        time: 10,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 36,
        experience_reward: 600,
        gold_reward: 1800,
        cosmic_reward: [2, 5],
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Iridian Village'],
        secondary_branch: 'Legendary',
        tier: 3,
        time: 6,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 18,
        experience_reward: 380,
        gold_reward: 1140,
        cosmic_reward: [1.2, 3],
        key: 1,
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Rainfall Village'],
        secondary_branch: 'Legendary',
        tier: 3,
        time: 6,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 18,
        experience_reward: 380,
        gold_reward: 1140,
        cosmic_reward: [1.2, 3],
        key: 2,
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Evergreen Village'],
        secondary_branch: 'Legendary',
        tier: 3,
        time: 6,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 18,
        experience_reward: 380,
        gold_reward: 1140,
        cosmic_reward: [1.2, 3],
        key: 3,
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Waterfall Village'],
        secondary_branch: 'Legendary',
        tier: 3,
        time: 6,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 18,
        experience_reward: 380,
        gold_reward: 1140,
        cosmic_reward: [1.2, 3],
        key: 4,
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Iridian Village'],
        secondary_branch: 'Legendary',
        tier: 3,
        time: 8,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 27,
        experience_reward: 500,
        gold_reward: 1500,
        cosmic_reward: [1.6, 4],
        key: 1,
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Rainfall Village'],
        secondary_branch: 'Legendary',
        tier: 3,
        time: 8,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 27,
        experience_reward: 500,
        gold_reward: 1500,
        cosmic_reward: [1.6, 4],
        key: 2,
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Evergreen Village'],
        secondary_branch: 'Legendary',
        tier: 3,
        time: 8,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 27,
        experience_reward: 500,
        gold_reward: 1500,
        cosmic_reward: [1.6, 4],
        key: 3,
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Waterfall Village'],
        secondary_branch: 'Legendary',
        tier: 3,
        time: 8,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 27,
        experience_reward: 500,
        gold_reward: 1500,
        cosmic_reward: [1.6, 4],
        key: 4,
      },
      
      //tier 4 
      {
        main_branch: 'Expedition',
        map_id: maps['Iridian River'],
        secondary_branch: 'Evolution',
        tier: 4,
        time: 10,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 48,
        experience_reward: 1200,
        gold_reward: 3600,
        cosmic_reward: [3, 6.5],
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Iridian Village'],
        secondary_branch: 'Legendary',
        tier: 4,
        time: 6,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 24,
        experience_reward: 760,
        gold_reward: 2280,
        cosmic_reward: [1.8, 3.9],
        key: 1,
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Rainfall Village'],
        secondary_branch: 'Legendary',
        tier: 4,
        time: 6,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 24,
        experience_reward: 760,
        gold_reward: 2280,
        cosmic_reward: [1.8, 3.9],
        key: 2,
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Evergreen Village'],
        secondary_branch: 'Legendary',
        tier: 4,
        time: 6,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 24,
        experience_reward: 760,
        gold_reward: 2280,
        cosmic_reward: [1.8, 3.9],
        key: 3,
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Waterfall Village'],
        secondary_branch: 'Legendary',
        tier: 4,
        time: 6,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 24,
        experience_reward: 760,
        gold_reward: 2280,
        cosmic_reward: [1.8, 3.9],
        key: 4,
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Iridian Village'],
        secondary_branch: 'Legendary',
        tier: 4,
        time: 8,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 36,
        experience_reward: 1000,
        gold_reward: 3000,
        cosmic_reward: [2.4, 5.2],
        key: 1,
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Rainfall Village'],
        secondary_branch: 'Legendary',
        tier: 4,
        time: 8,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 36,
        experience_reward: 1000,
        gold_reward: 3000,
        cosmic_reward: [2.4, 5.2],
        key: 2,
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Evergreen Village'],
        secondary_branch: 'Legendary',
        tier: 4,
        time: 8,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 36,
        experience_reward: 1000,
        gold_reward: 3000,
        cosmic_reward: [2.4, 5.2],
        key: 3,
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Waterfall Village'],
        secondary_branch: 'Legendary',
        tier: 4,
        time: 8,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 36,
        experience_reward: 1000,
        gold_reward: 3000,
        cosmic_reward: [2.4, 5.2],
        key: 4,
      },
      
      //tier 5 
      {
        main_branch: 'Expedition',
        map_id: maps['Iridian River'],
        secondary_branch: 'Evolution',
        tier: 5,
        time: 10,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 60,
        experience_reward: 2400,
        gold_reward: 7200,
        cosmic_reward: [4, 8],
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Iridian Village'],
        secondary_branch: 'Legendary',
        tier: 5,
        time: 6,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 30,
        experience_reward: 1520,
        gold_reward: 4560,
        cosmic_reward: [2.4, 4.8],
        key: 1,
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Rainfall Village'],
        secondary_branch: 'Legendary',
        tier: 5,
        time: 6,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 30,
        experience_reward: 1520,
        gold_reward: 4560,
        cosmic_reward: [2.4, 4.8],
        key: 2,
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Evergreen Village'],
        secondary_branch: 'Legendary',
        tier: 5,
        time: 6,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 30,
        experience_reward: 1520,
        gold_reward: 4560,
        cosmic_reward: [2.4, 4.8],
        key: 3,
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Waterfall Village'],
        secondary_branch: 'Legendary',
        tier: 5,
        time: 6,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 30,
        experience_reward: 1520,
        gold_reward: 4560,
        cosmic_reward: [2.4, 4.8],
        key: 4,
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Iridian Village'],
        secondary_branch: 'Legendary',
        tier: 5,
        time: 8,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 45,
        experience_reward: 2000,
        gold_reward: 6000,
        cosmic_reward: [3.2, 6.4],
        key: 1,
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Rainfall Village'],
        secondary_branch: 'Legendary',
        tier: 5,
        time: 8,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 45,
        experience_reward: 2000,
        gold_reward: 6000,
        cosmic_reward: [3.2, 6.4],
        key: 2,
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Evergreen Village'],
        secondary_branch: 'Legendary',
        tier: 5,
        time: 8,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 45,
        experience_reward: 2000,
        gold_reward: 6000,
        cosmic_reward: [3.2, 6.4],
        key: 3,
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Waterfall Village'],
        secondary_branch: 'Legendary',
        tier: 5,
        time: 8,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 45,
        experience_reward: 2000,
        gold_reward: 6000,
        cosmic_reward: [3.2, 6.4],
        key: 4,
      },
      
      //tier 6 
      {
        main_branch: 'Expedition',
        map_id: maps['Iridian River'],
        secondary_branch: 'Evolution',
        tier: 6,
        time: 10,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 72,
        experience_reward: 4800,
        gold_reward: 14400,
        cosmic_reward: [5, 10],
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Iridian Village'],
        secondary_branch: 'Legendary',
        tier: 6,
        time: 6,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 36,
        experience_reward: 3040,
        gold_reward: 9120,
        cosmic_reward: [3, 6],
        key: 1,
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Rainfall Village'],
        secondary_branch: 'Legendary',
        tier: 6,
        time: 6,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 36,
        experience_reward: 3040,
        gold_reward: 9120,
        cosmic_reward: [3, 6],
        key: 2,
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Evergreen Village'],
        secondary_branch: 'Legendary',
        tier: 6,
        time: 6,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 36,
        experience_reward: 3040,
        gold_reward: 9120,
        cosmic_reward: [3, 6],
        key: 3,
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Waterfall Village'],
        secondary_branch: 'Legendary',
        tier: 6,
        time: 6,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 36,
        experience_reward: 3040,
        gold_reward: 9120,
        cosmic_reward: [3, 6],
        key: 4,
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Iridian Village'],
        secondary_branch: 'Legendary',
        tier: 6,
        time: 8,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 54,
        experience_reward: 4000,
        gold_reward: 12000,
        cosmic_reward: [4, 8],
        key: 1,
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Rainfall Village'],
        secondary_branch: 'Legendary',
        tier: 6,
        time: 8,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 54,
        experience_reward: 4000,
        gold_reward: 12000,
        cosmic_reward: [4, 8],
        key: 2,
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Evergreen Village'],
        secondary_branch: 'Legendary',
        tier: 6,
        time: 8,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 54,
        experience_reward: 4000,
        gold_reward: 12000,
        cosmic_reward: [4, 8],
        key: 3,
      },
      {
        main_branch: 'Expedition',
        map_id: maps['Waterfall Village'],
        secondary_branch: 'Legendary',
        tier: 6,
        time: 8,
        createdAt: now,
        updatedAt: now,
        stamina_cost: 54,
        experience_reward: 4000,
        gold_reward: 12000,
        cosmic_reward: [4, 8],
        key: 4,
      },
    ]

    const createdMissions = await Promise.all(
      missions.map(({ main_branch, map_id, secondary_branch, tier, time, createdAt, updatedAt, key }) => Missions.create(({ main_branch, map_id, secondary_branch, tier, time, createdAt, updatedAt, key })))
    )

    const missionCurrencies = missions.map((mission, idx) => ([
      {
        mission_id: createdMissions[idx].id,
        currency_id: currencies['Stamina'],
        type: 'cost',
        lowest_amount: mission.stamina_cost,
        createdAt: now,
        updatedAt: now
      },
      {
        mission_id: createdMissions[idx].id,
        currency_id: currencies['Experience'],
        type: 'reward',
        lowest_amount: mission.experience_reward,
        createdAt: now,
        updatedAt: now
      },
      {
        mission_id: createdMissions[idx].id,
        currency_id: currencies['Gold'],
        type: 'reward',
        lowest_amount: mission.gold_reward,
        createdAt: now,
        updatedAt: now
      },
      {
        mission_id: createdMissions[idx].id,
        currency_id: currencies['Cosmic'],
        type: 'reward',
        lowest_amount: mission.cosmic_reward[0],
        highest_amount: mission.cosmic_reward[1],
        createdAt: now,
        updatedAt: now
      }
    ]))

    const createdMissionCurrencies = await queryInterface.bulkInsert('Mission_Currencies', missionCurrencies.flat(), {})
  },

  async down (queryInterface, Sequelize) {
    /**
     * Add commands to revert seed here.
     *
     * Example:
     * await queryInterface.bulkDelete('People', null, {});
     */
  }
};
